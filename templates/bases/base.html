<!DOCTYPE html>
<html lang="en" data-bs-theme="light" x-data>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {# Bootstrap 5.3 #}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"
          rel="stylesheet">

    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>

    {# Icons #}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    {# Alpine.js #}
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.1/dist/cdn.min.js"></script>
</head>
<body>

<header>
    {% block header %}
        <nav class="container py-3 d-flex justify-content-between align-items-center">
            <div>
                [<a href="{% url 'order_list' %}">Mis Ordenes</a>]
                [<a href="{% url 'order_create' %}">Crear Orden</a>]
                [<a href="{% url 'login' %}">Login</a>]
                [<a href="/admin/">Admin</a>]

                <form method="post" action="{% url 'logout' %}" class="d-inline">
                    {% csrf_token %}
                    <button name="logout-submit" type="submit" class="btn btn-link p-0">Logout</button>
                </form>
            </div>

            <div class="d-flex">
                <button class="btn btn-light"
                        :class="{'btn-secondary': $store.theme === 'dark'}"
                        @click="$store.theme = 'light'; saveTheme()">
                    <i class="bi bi-brightness-high"></i> Light
                </button>
                <button class="btn btn-dark ms-2"
                        :class="{'btn-secondary': $store.theme === 'light'}"
                        @click="$store.theme = 'dark'; saveTheme()">
                    <i class="bi bi-moon-stars"></i> Dark
                </button>
            </div>
        </nav>
    {% endblock %}
</header>

<main class="container mt-4">
    {% block content %}
        {# Aquí va el contenido #}
    {% endblock %}
</main>

<footer class="container mt-4">
    {% block footer %}
        <!-- Footer content -->
    {% endblock %}
</footer>

<script>
    document.addEventListener('alpine:init', () => {
        // Inicializar el store de Alpine con el tema actual o el tema por defecto (light)
        Alpine.store('theme', localStorage.getItem('theme') || 'light');

        // Función para guardar el tema en localStorage y actualizar el atributo data-bs-theme
        window.saveTheme = function () {
            localStorage.setItem('theme', Alpine.store('theme'));
            document.documentElement.setAttribute('data-bs-theme', Alpine.store('theme'));
        };

        // Aplicar el tema al cargar la página
        document.documentElement.setAttribute('data-bs-theme', Alpine.store('theme'));
    });
</script>

{% block script %}

{% endblock %}
</body>
</html>
