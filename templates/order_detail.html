<!-- templates/order_detail.html -->
{% extends 'bases/base-nav.html' %}
{% load qr_code %}

{% block nav %}
  <div class="container-fluid">
    <div class="navbar-brand fw-medium">Detalles</div>
    <a class="btn" href="{{ request.META.HTTP_REFERER }}"><i class="bi bi-x-lg"></i></a>
  </div>
{% endblock %}

{% block content %}
  <div class="container">
    {% for message in messages %}
      <div class="mb-2" role="alert">
        <div class="alert alert-primary d-flex align-items-center">
          <i class="bi bi-check-circle-fill"></i><span class="ps-1">{{ message }}</span>
        </div>
      </div>
    {% endfor %}

    {% include 'components/order_details_card.html' with order=order qr_visible=True %}

    {# Detalles de reporte #}
    {% if order.get_report %}
      <div class="card mt-2">
        <div class="card-header small text-muted">Reporte</div>
        <p class="card-body pb-0">{{ order.get_report.details }}</p>
      </div>
    {% endif %}

    <div class="mt-2">
      {% include 'components/order_articles_card.html' with order=order %}
    </div>
  </div>

  {# Bot√≥n de Cancelar para ordenes pendientes #}
  {% if order.status == 'pending' %}
    <div class="fixed-bottom container">
      <div class="d-grid my-2">
        <button class="btn btn-primary btn-lg" type="button">Cancelar Orden</button>
      </div>
    </div>
  {% endif %}
{% endblock %}
